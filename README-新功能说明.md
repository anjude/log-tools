# 日志工具新功能说明

## 功能概述

本次更新为日志管理工具添加了以下新功能：

1. **文件名悬浮显示完整路径** - 鼠标悬浮在日志行的文件名上时，会显示完整的文件路径
2. **显示设置合并到搜索配置** - 将显示行数和倒序显示等设置整合到搜索配置区域
3. **高级搜索语法** - 支持双引号包裹的精确匹配、and/or逻辑连接符、空格分割关键词
4. **搜索配置本地存储** - 搜索配置（显示行数、倒序显示）保存到浏览器本地，下次自动加载

## 详细功能说明

### 1. 文件名悬浮显示完整路径

- **功能**：在日志显示区域，每行末尾显示文件名，鼠标悬浮时显示完整文件路径
- **实现**：使用HTML的`title`属性，鼠标悬浮时显示完整路径
- **显示效果**：文件名（悬浮显示完整路径）

### 2. 显示设置合并到搜索配置

- **布局调整**：将原来左侧的"显示设置"卡片移动到右侧"搜索配置"卡片内
- **功能整合**：显示行数、倒序显示、刷新按钮、保存配置按钮统一布局
- **视觉优化**：使用分割线区分不同配置区域，保持界面整洁

### 3. 高级搜索语法

#### 3.1 基本语法规则

- **双引号包裹**：用于精确匹配完整短语
- **空格分割**：多个关键词之间用空格分割
- **AND/OR连接**：使用`and`或`or`关键字连接多个搜索条件
- **连续空格**：支持连续空格，会被自动处理
- **大小写不敏感**：搜索不区分大小写

#### 3.2 搜索示例

```
# 精确匹配（双引号）
"error message"          # 搜索包含完整短语 "error message" 的行
"connection failed"      # 搜索包含完整短语 "connection failed" 的行

# 单词匹配
error                    # 搜索包含单词 "error" 的行
exception                # 搜索包含单词 "exception" 的行

# AND 逻辑（默认）
error exception          # 搜索同时包含 "error" 和 "exception" 的行
"error message" exception # 搜索包含 "error message" 短语且包含 "exception" 单词的行

# OR 逻辑
error or exception       # 搜索包含 "error" 或 "exception" 的行
"error message" or "exception occurred" # 搜索包含任一短语的行

# 混合使用
"error message" and exception or warning # 搜索包含 "error message" 且包含 "exception"，或者包含 "warning" 的行
```

#### 3.3 技术实现

- **前端解析**：JavaScript实现搜索模式解析，支持实时预览
- **后端处理**：Go语言实现高级搜索逻辑，支持AND/OR逻辑运算
- **性能优化**：支持行数限制，避免大文件搜索性能问题

### 4. 搜索配置本地存储

- **存储内容**：显示行数、倒序显示设置
- **存储方式**：使用浏览器localStorage
- **自动加载**：页面加载时自动恢复上次保存的配置
- **手动保存**：提供"保存配置"按钮，用户可主动保存当前设置
- **视觉反馈**：保存成功后显示确认提示

## 使用方法

### 基本操作流程

1. **选择日志文件**：在左侧文件列表中选择要查看的日志文件
2. **配置显示设置**：设置显示行数、是否倒序显示
3. **输入搜索模式**：使用高级搜索语法输入搜索条件
4. **执行搜索**：点击搜索按钮或按回车键执行搜索
5. **保存配置**：点击"保存配置"按钮保存当前设置

### 搜索语法技巧

1. **精确短语搜索**：使用双引号包裹需要精确匹配的短语
2. **逻辑组合**：合理使用and/or连接符组合多个搜索条件
3. **关键词选择**：选择有代表性的关键词，避免过于宽泛的搜索
4. **测试搜索**：使用测试页面验证搜索语法的正确性

## 技术架构

### 前端技术

- **HTML5**：语义化标签，无障碍访问支持
- **CSS3**：响应式布局，现代化UI设计
- **JavaScript ES6+**：模块化代码，异步操作处理
- **Bootstrap 5**：UI组件库，响应式设计

### 后端技术

- **Go语言**：高性能服务器端语言
- **Gin框架**：轻量级Web框架
- **文件系统操作**：安全的文件路径处理
- **搜索算法**：高效的文本搜索实现

### 数据存储

- **本地存储**：浏览器localStorage存储用户配置
- **文件系统**：直接读取服务器日志文件
- **内存缓存**：搜索结果缓存优化

## 注意事项

1. **文件路径安全**：所有文件操作都经过路径安全检查，防止路径遍历攻击
2. **性能考虑**：大文件搜索时建议设置合理的行数限制
3. **浏览器兼容性**：需要支持ES6+的现代浏览器
4. **搜索语法**：严格按照语法规则使用，避免语法错误

## 测试验证

提供了`test-search.html`测试页面，可以：

1. **测试搜索语法解析**：输入各种搜索模式，查看解析结果
2. **学习搜索语法**：通过示例了解各种搜索用法
3. **验证功能正确性**：确保搜索逻辑符合预期

## 更新日志

- **v1.1.0**：添加高级搜索语法支持
- **v1.1.0**：实现搜索配置本地存储
- **v1.1.0**：优化用户界面布局
- **v1.1.0**：增强文件名显示功能

## 联系方式

如有问题或建议，请联系开发团队。
